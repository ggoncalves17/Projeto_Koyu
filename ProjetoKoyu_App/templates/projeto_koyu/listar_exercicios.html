{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Listar Exercícios</title>
    <link rel="stylesheet" type="text/css" href="{% static '/css/listar_exercicios.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static '/css/menu_lateral.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static '/css/popup.css' %}">
</head>

<body>

    <!-- Menu Lateral -->
    <div class="container">

        <aside class="menu-lateral">
            <div class="perfil">
                <div class="foto-perfil"></div>
                <p>Bem-vindo,<br><span>USER_NAME</span></p>
            </div>
            <nav class="menu">
				<ul>
					<a href="{% url 'dashboard' %}" class="navlink">
						<li><span class="icon"><svg width="40" height="35" viewBox="0 0 60 60" fill="none"
									xmlns="http://www.w3.org/2000/svg">
									<path
										d="M38.025 5.00004H21.875C17.4015 5.00666 13.1131 6.78668 9.94988 9.94992C6.78663 13.1132 5.00661 17.4015 5 21.875V38.125C5.00661 42.5985 6.78663 46.8869 9.94988 50.0502C13.1131 53.2134 17.4015 54.9934 21.875 55H38.125C42.5985 54.9934 46.8869 53.2134 50.0501 50.0502C53.2134 46.8869 54.9934 42.5985 55 38.125V21.875C54.9967 19.6515 54.5547 17.4504 53.6992 15.398C52.8438 13.3456 51.5917 11.4822 50.0148 9.91452C48.4378 8.34688 46.567 7.10583 44.5096 6.26251C42.4522 5.41919 40.2485 4.99017 38.025 5.00004ZM21.075 40.575C21.075 41.1055 20.8643 41.6142 20.4892 41.9893C20.1141 42.3643 19.6054 42.575 19.075 42.575C18.5446 42.575 18.0359 42.3643 17.6608 41.9893C17.2857 41.6142 17.075 41.1055 17.075 40.575V27.825C17.075 27.2946 17.2857 26.7859 17.6608 26.4108C18.0359 26.0358 18.5446 25.825 19.075 25.825C19.6054 25.825 20.1141 26.0358 20.4892 26.4108C20.8643 26.7859 21.075 27.2946 21.075 27.825V40.575ZM32.2 40.575C32.2 40.8377 32.1483 41.0978 32.0478 41.3404C31.9472 41.5831 31.7999 41.8035 31.6142 41.9893C31.4285 42.175 31.208 42.3223 30.9654 42.4228C30.7227 42.5233 30.4626 42.575 30.2 42.575C29.9374 42.575 29.6773 42.5233 29.4346 42.4228C29.192 42.3223 28.9715 42.175 28.7858 41.9893C28.6001 41.8035 28.4528 41.5831 28.3522 41.3404C28.2517 41.0978 28.2 40.8377 28.2 40.575V19.45C28.2 18.9196 28.4107 18.4109 28.7858 18.0358C29.1609 17.6608 29.6696 17.45 30.2 17.45C30.7304 17.45 31.2391 17.6608 31.6142 18.0358C31.9893 18.4109 32.2 18.9196 32.2 19.45V40.575ZM42.725 40.575C42.725 41.1055 42.5143 41.6142 42.1392 41.9893C41.7641 42.3643 41.2554 42.575 40.725 42.575C40.1946 42.575 39.6859 42.3643 39.3108 41.9893C38.9357 41.6142 38.725 41.1055 38.725 40.575V24.55C38.725 24.0196 38.9357 23.5109 39.3108 23.1358C39.6859 22.7608 40.1946 22.55 40.725 22.55C41.2554 22.55 41.7641 22.7608 42.1392 23.1358C42.5143 23.5109 42.725 24.0196 42.725 24.55V40.575Z"
										fill="white" />
								</svg></span> Dashboard</li>
					</a>
					<a href="{% url 'listar_exercicios' %}" class="navlink">
						<li class="ativo"><span class="icon"><svg width="40" height="35" viewBox="0 0 63 45" fill="none"
									xmlns="http://www.w3.org/2000/svg">
									<path
										d="M10 7H5C3.7 7 3 8.7 3 10V20H1C0.749561 20.0409 0.518296 20.1594 0.338863 20.3389C0.15943 20.5183 0.0408963 20.7496 0 21V25C0.0408963 25.2504 0.15943 25.4817 0.338863 25.6611C0.518296 25.8406 0.749561 25.9591 1 26H3V36C3 37.3 3.7 39 5 39H10C10.7526 38.8805 11.4482 38.5259 11.987 37.987C12.5259 37.4482 12.8805 36.7526 13 36V10C12.8805 9.24735 12.5259 8.55182 11.987 8.01295C11.4482 7.47408 10.7526 7.11951 10 7ZM62 20H59V10C59 8.7 58.3 7 57 7H52C50.7 7 50 8.7 50 10V36C50 37.3 50.7 39 52 39H57C58.3 39 59 37.3 59 36V26H62C62.2504 25.9591 62.4817 25.8406 62.6611 25.6611C62.8406 25.4817 62.9591 25.2504 63 25V21C62.9591 20.7496 62.8406 20.5183 62.6611 20.3389C62.4817 20.1594 62.2504 20.0409 62 20ZM45 0.999996H40C39.7296 0.967835 39.4554 0.997438 39.1982 1.08658C38.9409 1.17571 38.7072 1.32206 38.5146 1.5146C38.3221 1.70715 38.1757 1.94086 38.0866 2.19815C37.9974 2.45544 37.9678 2.72961 38 3V20H25V3C25.0322 2.72961 25.0026 2.45544 24.9134 2.19815C24.8243 1.94086 24.6779 1.70715 24.4854 1.5146C24.2929 1.32206 24.0591 1.17571 23.8018 1.08658C23.5445 0.997438 23.2704 0.967835 23 0.999996H18C17.7296 0.967835 17.4555 0.997438 17.1982 1.08658C16.9409 1.17571 16.7071 1.32206 16.5146 1.5146C16.3221 1.70715 16.1757 1.94086 16.0866 2.19815C15.9974 2.45544 15.9678 2.72961 16 3V42C16 43.3 16.7 45 18 45H23C24.3 45 25 43.3 25 42V26H38V42C38 43.3 38.7 45 40 45H45C46.3 45 47 43.3 47 42V3C47.0322 2.72961 47.0026 2.45544 46.9134 2.19815C46.8243 1.94086 46.6779 1.70715 46.4854 1.5146C46.2928 1.32206 46.0591 1.17571 45.8018 1.08658C45.5446 0.997438 45.2704 0.967835 45 0.999996Z"
										fill="white" fill-opacity="0.5" />
								</svg></span> Exercícios</li>
					</a>
					<a href="{% url 'listar_treinos' %}" class="navlink">
						<li><span class="icon"><svg width="40" height="30" viewBox="0 0 38 50" fill="none"
									xmlns="http://www.w3.org/2000/svg">
									<path
										d="M33 5.99999H25C25.0225 5.20595 24.8827 4.41567 24.5891 3.67754C24.2956 2.93941 23.8544 2.26897 23.2927 1.70727C22.731 1.14557 22.0606 0.70443 21.3225 0.410866C20.5843 0.117303 19.794 -0.022509 19 -7.43265e-06C18.206 -0.022509 17.4157 0.117303 16.6775 0.410866C15.9394 0.70443 15.269 1.14557 14.7073 1.70727C14.1456 2.26897 13.7044 2.93941 13.4109 3.67754C13.1173 4.41567 12.9775 5.20595 13 5.99999H5C3.69277 6.05861 2.45478 6.60421 1.5295 7.52949C0.604221 8.45477 0.0586196 9.69276 0 11L0 45C0.0586196 46.3072 0.604221 47.5452 1.5295 48.4705C2.45478 49.3958 3.69277 49.9414 5 50H33C34.3072 49.9414 35.5452 49.3958 36.4705 48.4705C37.3958 47.5452 37.9414 46.3072 38 45V11C37.9414 9.69276 37.3958 8.45477 36.4705 7.52949C35.5452 6.60421 34.3072 6.05861 33 5.99999ZM9 41C8.72961 41.0322 8.45545 41.0026 8.19816 40.9134C7.94087 40.8243 7.70715 40.6779 7.51461 40.4854C7.32207 40.2928 7.17572 40.0591 7.08658 39.8018C6.99744 39.5445 6.96784 39.2704 7 39C6.96784 38.7296 6.99744 38.4554 7.08658 38.1982C7.17572 37.9409 7.32207 37.7071 7.51461 37.5146C7.70715 37.3221 7.94087 37.1757 8.19816 37.0866C8.45545 36.9974 8.72961 36.9678 9 37C10.3 37 12 37.7 12 39C12 40.3 10.3 41 9 41ZM9 32C8.72961 32.0322 8.45545 32.0025 8.19816 31.9134C7.94087 31.8243 7.70715 31.6779 7.51461 31.4854C7.32207 31.2928 7.17572 31.0591 7.08658 30.8018C6.99744 30.5445 6.96784 30.2704 7 30C7 28.7 7.7 27 9 27C9.75264 27.1195 10.4482 27.4741 10.987 28.0129C11.5259 28.5518 11.8805 29.2473 12 30C12 31.3 10.3 32 9 32ZM9 23C7.7 23 7 21.3 7 20C6.96784 19.7296 6.99744 19.4554 7.08658 19.1982C7.17572 18.9409 7.32207 18.7071 7.51461 18.5146C7.70715 18.3221 7.94087 18.1757 8.19816 18.0866C8.45545 17.9974 8.72961 17.9678 9 18C10.3 18 12 18.7 12 20C11.8805 20.7526 11.5259 21.4482 10.987 21.987C10.4482 22.5259 9.75264 22.8805 9 23ZM19 3.99999C19.2704 3.96783 19.5445 3.99743 19.8018 4.08657C20.0591 4.17571 20.2929 4.32206 20.4854 4.5146C20.6779 4.70714 20.8243 4.94086 20.9134 5.19815C21.0026 5.45544 21.0322 5.7296 21 5.99999C21 7.29999 20.3 8.99999 19 8.99999C18.2474 8.88048 17.5518 8.52591 17.013 7.98704C16.4741 7.44817 16.1195 6.75264 16 5.99999C16 4.69999 17.7 3.99999 19 3.99999ZM31 40C30.9591 40.2504 30.8406 40.4817 30.6611 40.6611C30.4817 40.8406 30.2504 40.9591 30 41H16C15.57 41 16 40.43 16 40V38C15.57 38 16 37.57 16 38H30C30.43 38 31 37.57 31 38V40ZM31 30C30.9591 30.2504 30.8406 30.4817 30.6611 30.6611C30.4817 30.8406 30.2504 30.9591 30 31H16C15.57 31 16 30.43 16 30V29C16 28.57 15.57 28 16 28H30C30.2504 28.0409 30.4817 28.1594 30.6611 28.3389C30.8406 28.5183 30.9591 28.7496 31 29V30ZM31 21C30.9591 21.2504 30.8406 21.4817 30.6611 21.6611C30.4817 21.8406 30.2504 21.9591 30 22H16C15.57 22 16 21.43 16 21V20C16 19.57 15.57 19 16 19H30C30.2504 19.0409 30.4817 19.1594 30.6611 19.3389C30.8406 19.5183 30.9591 19.7496 31 20V21Z"
										fill="white" fill-opacity="0.5" />
								</svg></span> Treino</li>
					</a>
					<a href="{% url 'listar_utilizadores' %}" class="navlink">
						<li><span class="icon"><svg width="35" height="40" viewBox="0 0 63 45" fill="none"
									xmlns="http://www.w3.org/2000/svg">
									<path
										d="M18.9999 22C21.1755 22 23.3022 21.3549 25.1111 20.1462C26.9201 18.9375 28.33 17.2195 29.1625 15.2095C29.9951 13.1995 30.2129 10.9878 29.7885 8.85401C29.3641 6.72022 28.3164 4.76021 26.778 3.22183C25.2397 1.68345 23.2797 0.635804 21.1459 0.211367C19.0121 -0.213071 16.8003 0.00476617 14.7904 0.83733C12.7804 1.66989 11.0624 3.07979 9.85371 4.88873C8.64501 6.69767 7.99988 8.82441 7.99988 11C8.01015 13.9142 9.17238 16.7062 11.2331 18.7668C13.2937 20.8275 16.0857 21.9897 18.9999 22ZM25.9999 25H24.9999C22.9689 25.977 21.3999 27 18.9999 27C16.5506 26.8402 14.1639 26.1582 11.9999 25H10.9999C9.54904 24.9772 8.1084 25.2461 6.76351 25.7908C5.41862 26.3356 4.19689 27.145 3.17086 28.171C2.14484 29.197 1.33543 30.4187 0.790711 31.7636C0.245989 33.1085 -0.0229454 34.5492 -0.000125188 36V39C0.0584944 40.3072 0.604096 41.5452 1.52937 42.4705C2.45465 43.3958 3.69265 43.9414 4.99987 44H32.9999C34.3071 43.9414 35.5451 43.3958 36.4704 42.4705C37.3957 41.5452 37.9413 40.3072 37.9999 39V36C37.9999 29.789 32.2109 25 25.9999 25ZM46.9999 22C48.1912 22.0346 49.3769 21.8254 50.4845 21.3853C51.592 20.9453 52.598 20.2836 53.4407 19.4409C54.2834 18.5982 54.9451 17.5922 55.3852 16.4846C55.8253 15.3771 56.0344 14.1913 55.9999 13C55.9999 7.824 52.1759 3.00001 46.9999 3.00001C41.8239 3.00001 37.9999 7.824 37.9999 13C37.9653 14.1913 38.1745 15.3771 38.6146 16.4846C39.0546 17.5922 39.7163 18.5982 40.559 19.4409C41.4017 20.2836 42.4077 20.9453 43.5153 21.3853C44.6228 21.8254 45.8086 22.0346 46.9999 22ZM51.9999 25H50.9999C49.7374 25.5708 48.3824 25.9095 46.9999 26C45.6173 25.9095 44.2624 25.5708 42.9999 25H41.9999C40.0079 25 38.6109 26.072 36.9999 27C39.3829 29.568 40.9999 32.23 40.9999 36V40C40.9999 40.215 41.0099 40.795 40.9999 41H57.9999C59.3071 40.9414 60.5451 40.3958 61.4704 39.4705C62.3957 38.5452 62.9413 37.3072 62.9999 36C62.9896 33.0858 61.8274 30.2939 59.7667 28.2332C57.706 26.1725 54.9141 25.0103 51.9999 25Z"
										fill="white" fill-opacity="0.5" />
								</svg></span> Utilizadores</li>
					</a>
					<a href="#" class="navlink">
						<li><span class="icon"><svg width="40" height="30" viewBox="0 0 50 50" fill="none"
									xmlns="http://www.w3.org/2000/svg">
									<path
										d="M25 28C27.7689 28 30.4757 27.1789 32.778 25.6406C35.0803 24.1022 36.8747 21.9157 37.9343 19.3576C38.9939 16.7994 39.2712 13.9845 38.731 11.2687C38.1908 8.55301 36.8574 6.05845 34.8995 4.10051C32.9416 2.14258 30.447 0.809205 27.7313 0.269012C25.0155 -0.271181 22.2006 0.00606608 19.6424 1.06569C17.0843 2.12532 14.8978 3.91973 13.3594 6.22202C11.8211 8.52431 11 11.2311 11 14C10.9947 15.84 11.3532 17.6629 12.0549 19.3638C12.7566 21.0648 13.7877 22.6102 15.0887 23.9113C16.3898 25.2123 17.9353 26.2434 19.6362 26.9451C21.3371 27.6468 23.16 28.0053 25 28ZM38 31H32C29.84 32.1682 27.4511 32.8508 25 33C22.5491 32.8494 20.1605 32.167 18 31H13C9.58166 31.0934 6.32903 32.493 3.911 34.911C1.49297 37.329 0.0933593 40.5817 0 44L0 45C0.0586196 46.3072 0.604221 47.5452 1.5295 48.4705C2.45478 49.3958 3.69277 49.9414 5 50H45C46.3072 49.9414 47.5452 49.3958 48.4705 48.4705C49.3958 47.5452 49.9414 46.3072 50 45V44C50 37.1 44.9 31 38 31Z"
										fill="white" fill-opacity="0.5" />
								</svg></span> Perfil</li>
					</a>
				</ul>
				<a href="{% url 'logout' %}" class="navlink"><button class="logout"><span class="icon"><svg width="25" height="25"
								viewBox="0 0 45 40" fill="none" xmlns="http://www.w3.org/2000/svg">
								<path
									d="M16.834 0.361023V5.97202H39.279V34.028H16.834V39.639H44.89V0.361023H16.834ZM11.222 11.583L0 20L11.222 28.417V22.806H33.667V17.195H11.222V11.583Z"
									fill="white" />
							</svg></span> Logout</button></a>
			</nav>
        </aside>

    </div>
    <!-- Menu Lateral -->

    <div class="main">
        <div class="main-header">
            <div class="title" style="display: flex; align-items: center; ">
                <img src="{% static 'images/GP_LogótipoVerde.png' %}" alt="Logotipo" style="width: 150px;">
                <div id="barra-vertical"></div>
                <p style="font: size 20px; color: #78997a;"> Listar Exercícios</p>
            </div>
            <div class="search">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="32" height="32" fill="#ffffff" id="svg-lupa">
                    <circle cx="10" cy="10" r="6" stroke="#ffffff" stroke-width="2" fill="none" />
                    <line x1="14" y1="14" x2="20" y2="20" stroke="#ffffff" stroke-width="2" stroke-linecap="round" />
                </svg>
                <input id="search-bar" type="text" placeholder="Pesquisar..." onkeyup="filtro()">
            </div>
        </div>
        <div class="main-body">
            {% for exercicio in exercicios %}
            <div class="exercise-card" exercicio_nome="{{ exercicio.ex_nome }}">
                <div class="details">
                    <h3>{{ exercicio.ex_nome }}</h3>
                </div>
                <p class="materials"><strong>Material</strong></p>
                <div class="materials">
                    {% if exercicio.equipamento %}
                    <img src="{{ exercicio.equipamento.eq_foto }}" alt="{{ exercicio.equipamento.eq_nome }}">
                    {% else %}
                    <p>Sem equipamento</p>
                    {% endif %}
                </div>
                                
                <div class="button-div">
                    <a href="">
                        <button>Ver detalhes</button>
                    </a> 

                    <button onclick="showPopup('popup-confirmacao', '{{ exercicio.id }}')" style="border: none; background: none; padding: 0; cursor: pointer; width: 10px; height: 10px;">
                        <svg width="22" height="27" fill="#6b8e23" id="svg-lixo" viewBox="0 0 22 27" xmlns="http://www.w3.org/2000/svg">
                            <path d="M1.65395 8.267V24.8C1.65527 25.238 1.82985 25.6577 2.13956 25.9674C2.44927 26.2771 2.86896 26.4517 3.30695 26.453H18.187C18.625 26.4517 19.0446 26.2771 19.3543 25.9674C19.6641 25.6577 19.8386 25.238 19.84 24.8V8.267H1.65395ZM6.61395 23.147H4.96095V11.572H6.61395V23.147ZM9.92095 23.147H8.26695V11.572H9.91995L9.92095 23.147ZM13.228 23.147H11.574V11.572H13.227L13.228 23.147ZM16.535 23.147H14.881V11.572H16.534L16.535 23.147ZM20.255 3.307H14.881V1.24C14.8799 0.911456 14.7489 0.59667 14.5166 0.364353C14.2843 0.132036 13.9695 0.00105472 13.641 0H7.85395C7.52541 0.00105472 7.21062 0.132036 6.97831 0.364353C6.74599 0.59667 6.61501 0.911456 6.61395 1.24V3.307H1.24095C0.912583 3.30832 0.598052 3.43942 0.365951 3.6717C0.13385 3.90399 0.00300634 4.21863 0.00195312 4.547V6.613H21.494V4.547C21.4929 4.21846 21.3619 3.90367 21.1296 3.67135C20.8973 3.43904 20.5835 3.30805 20.255 3.307ZM13.228 3.307H8.26795V1.672H13.228V3.307Z" fill="#78997A"/>
                        </svg>
                    </button>
                </div>
            </div>
            {% endfor %}
        </div>

        <div id="popup-confirmacao" class="popup-confirmacao" style="display: none;">
            <div class="message">Deseja mesmo remover o exercício?</div>
            <div class="popup-buttons">
                <button class="confirmar" onclick="confirmarAcao()">Confirmar</button>
                <button class="cancelar" onclick="closePopup('popup-confirmacao')">Cancelar</button>
            </div>
        </div>

        <a href="#">
            <button id="add-button">+</button>
        </a> 
    </div>

    <script>
        function filtro() {
            let searchBar = document.getElementById('search-bar');
            let termoPesquisa = searchBar.value.toLowerCase(); 
            let exerciseCards = document.getElementsByClassName('exercise-card'); 
    
            for (let i = 0; i < exerciseCards.length; i++) {
                let exerciseName = exerciseCards[i].getAttribute('exercicio_nome');

                if(termoPesquisa == "" || exerciseName.toLowerCase().includes(termoPesquisa)){
                    exerciseCards[i].style.display = "";
                } else {
                    exerciseCards[i].style.display = "none"; 
                }
            }
        }

        let idExercicio = null; 

        function showPopup(popupId, exercicioId) {
            idExercicio = exercicioId; 
            console.log(idExercicio);
            const popup = document.getElementById(popupId);
            popup.style.display = "flex"; 
            document.body.classList.add('popup-aberto'); 
        }

        function confirmarAcao(){
            if (idTreino) {
                window.location.href = `/eliminar_treino/${idExercicio}/`
                closePopup('popup-confirmacao');
            }
        }

        function closePopup(popupId) {
            const popup = document.getElementById(popupId);
            popup.style.display = "none";
            document.body.classList.remove('popup-aberto');
        }
    </script>
    
</body>

</html>